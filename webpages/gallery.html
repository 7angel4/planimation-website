<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planimation Animations</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
        }
        a {
            margin: 10px;
            display: inline-block;
        }
        #searchInput {
            padding: 10px;
            width: 300px;
        }
        .gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        .animation {
            margin: 10px;
        }
    </style>
    <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>

    <!-- Firebase Firestore (the database) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDf--XeJ2-pkwKkjGO1RLxzjwzJZUy_e0s",
            authDomain: "planimation-staging-181bc.firebaseapp.com",
            projectId: "planimation-staging-181bc",
            storageBucket: "planimation-staging-181bc.appspot.com",
            messagingSenderId: "914707935474",
            appId: "1:914707935474:web:ba4d0f22fa93687482206b",
            measurementId: "G-XYNE4FJ1CF"
        };
    
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
    </script>
</head>
<body>
    <h1>Planimation Animations</h1>
    <a href="index.html">Home</a>
    <a href="doc.html">Documentation</a>
    <a href="references.html">References</a>
    <a href="suggestions.html">Contact Us</a>

    <input type="text" id="searchInput" placeholder="Search animations..." onkeyup="filterAnimations()">

    <div class="gallery" id="animationGallery">
        <!-- Sample animation links -->
        <div class="animation">
            <a href="15puzzle.html">15Puzzle</a>
        </div>
        <div class="animation">
            <a href="blocksworld.html">BlocksWorld</a>
        </div>
        <!-- Add more animation links as needed -->
    </div>

    <script>
        // Fetch animations from Firestore and display in the gallery
        function fetchAnimations() {
            const gallery = document.getElementById('animationGallery');

            // Clear existing animations
            gallery.innerHTML = '';

            db.collection("animation").get().then((querySnapshot) => {
                querySnapshot.forEach((doc) => {
                    const animationData = doc.data();

                    // Create a new animation div
                    const animationDiv = document.createElement('div');
                    animationDiv.className = 'animation';

                    // Create the link element
                    const animationLink = document.createElement('a');
                    animationLink.href = animationData.link;
                    animationLink.textContent = animationData.name;

                    // Append the link to the animation div
                    animationDiv.appendChild(animationLink);

                    // Append the animation div to the gallery
                    gallery.appendChild(animationDiv);
                });
            }).catch((error) => {
                console.error("Error fetching animations: ", error);
            });
        }

        // Call the function when the script runs
        fetchAnimations();

        function filterAnimations() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toUpperCase();
            const gallery = document.getElementById('animationGallery');
            const animations = gallery.getElementsByClassName('animation');

            for (let i = 0; i < gallery.length; i++) {
                const a = gallery[i].getElementsByTagName('a')[0];
                const txtValue = a.textContent || a.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    gallery[i].style.display = "";
                } else {
                    gallery[i].style.display = "none";
                }
            }
        }
    </script>
</body>
</html>
